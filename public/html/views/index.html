<script type="text/ng-template" id="task-template.html">
  <div class="panel" ng-class="panelClass">
    <div class="panel-heading">
      <h4 class="panel-title">
        <span uib-accordion-transclude="headingPreToggle"><span uib-accordion-header>{{headingPreToggle}}</span></span>
        <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span uib-accordion-header>{{heading}}</span></a>
        <span uib-accordion-transclude="headingPostToggle"><span uib-accordion-header>{{headingPostToggle}}</span></span>
      </h4>
    </div>
    <div class="panel-collapse collapse" uib-collapse="!isOpen">
      <div class="panel-body" ng-transclude></div>
    </div>
  </div>
</script>

<div class="container">
  <div class='col-sm-12'>
    <a href="/logout" class="btn btn-ms btn-success pull-right">Sign Out</a>
  </div>
</div>

<div class="title">
    <h1>Taskie</h1>
</div>

<div class="container">
  <div class="panel panel-default">
    <div class="panel-heading">
      <b>Tasks In-Progress</b>
      <a class="btn btn-xs" data-type="plus" ng-click="showTaskModal()">
        <span class="glyphicon glyphicon-plus"></span>
      </a>
    </div>
    <div class="panel-body">
      <uib-accordion close-others=false>
        <uib-accordion-group template-url="task-template.html" ng-repeat="task in tasksInProgress | orderBy: taskGetDueDate" is-open="status.open" panel-class="((task.Status == Constants.STATUS_INPROGRESS) ? 'panel-info' : 'panel-default')">
          <uib-accordion-heading-pre-toggle>
            <a class="btn btn-xs" ng-click="updateTask(task.TaskID, undefined, undefined, undefined, ((task.Status == Constants.STATUS_INPROGRESS) ? 2 : 1))">
              <span class="glyphicon" ng-class="{'glyphicon-check': task.Status == Constants.STATUS_COMPLETED, 'glyphicon-unchecked': task.Status == Constants.STATUS_INPROGRESS}"></span>
            </a>
          </uib-accordion-heading-pre-toggle>
          <uib-accordion-heading>
            <span class="glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></span>
            <b ng-class="{'strike-through': task.Status == Constants.STATUS_COMPLETED}">{{task.Title}}</b>
          </uib-accordion-heading>
          <uib-accordion-heading-post-toggle>
            <a class="btn btn-xs" ng-click="showTaskModal(task)">
              <span class="glyphicon glyphicon-pencil"></span>
            </a>
            <div class="pull-right">
              <b>{{task.DateDue | date:'MMM dd yyyy @ h:mm a'}}&nbsp&nbsp</b>
              <a class="btn btn-xs" ng-click="delTask(task.TaskID)">
                <span class="glyphicon glyphicon-remove"></span>
              </a>
            </div>
          </uib-accordion-heading-post-toggle>
          <span ng-class="{'strike-through': task.Status == Constants.STATUS_COMPLETED}">{{task.Description}}</span>
        </uib-accordion-group>
      </uib-accordion>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <b>Tasks Completed</b>
    </div>
    <div class="panel-body">
      <uib-accordion close-others=false>
        <uib-accordion-group template-url="task-template.html" ng-repeat="task in tasksCompleted | orderBy: taskGetModifiedDate:true" is-open="status.open" panel-class="((task.Status == Constants.STATUS_INPROGRESS) ? 'panel-info' : 'panel-default')">
          <uib-accordion-heading-pre-toggle>
            <a class="btn btn-xs" ng-click="updateTask(task.TaskID, undefined, undefined, undefined, ((task.Status == Constants.STATUS_INPROGRESS) ? 2 : 1))">
              <span class="glyphicon" ng-class="{'glyphicon-check': task.Status == Constants.STATUS_COMPLETED, 'glyphicon-unchecked': task.Status == Constants.STATUS_INPROGRESS}"></span>
            </a>
          </uib-accordion-heading-pre-toggle>
          <uib-accordion-heading>
            <span class="glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></span>
            <b ng-class="{'strike-through': task.Status == Constants.STATUS_COMPLETED}">{{task.Title}}</b>
          </uib-accordion-heading>
          <uib-accordion-heading-post-toggle>
            <div class="pull-right">
              <b>{{task.DateDue | date:'MMM dd yyyy @ h:mm a'}}&nbsp&nbsp</b>
              <a class="btn btn-xs" ng-click="delTask(task.TaskID)">
                <span class="glyphicon glyphicon-remove"></span>
              </a>
            </div>
          </uib-accordion-heading-post-toggle>
          <span ng-class="{'strike-through': task.Status == Constants.STATUS_COMPLETED}">{{task.Description}}</span>
        </uib-accordion-group>
      </uib-accordion>
    </div>
  </div>
</div>
